<!doctype html>
<html lang="en">
<head>
  <title>Checkout</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-white">

<div class="container py-5">
  <h1 class="mb-4">Checkout</h1>

  <!-- Order Summary -->
  <h3 class="mb-3">Order Summary</h3>
  <ul id="orderSummary" class="list-group mb-3"></ul>
  <div class="d-flex justify-content-between">
    <strong>Total:</strong> <strong id="orderTotal">$0.00</strong>
  </div>

  <!-- Payment Section -->
  <h3 class="mt-5">Payment Options</h3>
  <form id="paymentForm">
    <div class="mb-3">
      <label class="form-label">Select Payment Method</label>
      <select class="form-select" id="paymentMethod" required>
        <option value="">-- Choose --</option>
        <option value="mtn">MTN Mobile Money</option>
        <option value="orange">Orange Money</option>
        <option value="card">Bank Card</option>
      </select>
    </div>
    <div id="paymentDetails"></div>
    <button type="submit" class="btn btn-warning mt-3">Pay Now</button>
  </form>
</div>

<script>
function loadCart() {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  const summary = document.getElementById("orderSummary");
  const totalEl = document.getElementById("orderTotal");

  summary.innerHTML = "";
  let total = 0;

  cart.forEach(item => {
    total += item.price;
    summary.innerHTML += `
      <li class="list-group-item bg-dark text-white d-flex justify-content-between">
        ${item.name} <span>$${item.price.toFixed(2)}</span>
      </li>`;
  });

  totalEl.textContent = "$" + total.toFixed(2);
}

document.getElementById("paymentMethod").addEventListener("change", function() {
  const details = document.getElementById("paymentDetails");
  let html = "";
  if (this.value === "mtn") {
    html = `<div class="mb-3"><label>MTN Number</label><input type="text" class="form-control" required></div>`;
  } else if (this.value === "orange") {
    html = `<div class="mb-3"><label>Orange Number</label><input type="text" class="form-control" required></div>`;
  } else if (this.value === "card") {
    html = `<div class="mb-3"><label>Card Number</label><input type="text" class="form-control" required></div>
            <div class="mb-3"><label>Expiry</label><input type="month" class="form-control" required></div>
            <div class="mb-3"><label>CVV</label><input type="text" class="form-control" required></div>`;
  }
  details.innerHTML = html;
});

document.getElementById("paymentForm").addEventListener("submit", function(e) {
  e.preventDefault();
  alert("Payment successful! Thank you for shopping.");
  localStorage.removeItem("cart"); // clear cart after payment
  window.location.href = "shop.html"; // redirect back
});

window.onload = loadCart;
</script>
</body>
</html>
